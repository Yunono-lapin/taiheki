<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>MBTI風診断 - 質問</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>診断スタート！</h1>
    <label>ニックネーム：<input type="text" id="nickname"></label>

    <h2>Q1. あなたはアウトドア派？インドア派？</h2>
    <label><input type="radio" name="q1" value="アウトドア">アウトドア</label>
    <label><input type="radio" name="q1" value="どちらかといえばアウトドア">どちらかといえばアウトドア</label>
    <label><input type="radio" name="q1" value="どちらかといえばインドア">どちらかといえばインドア</label>
    <label><input type="radio" name="q1" value="インドア">インドア</label>

    <h2>Q2. 考えることが好きだ</h2>
    <label><input type="radio" name="q2" value="好き">好き</label>
    <label><input type="radio" name="q2" value="どちらかといえば好き">どちらかといえば好き</label>
    <label><input type="radio" name="q2" value="あまり好きでない">あまり好きでない</label>
    <label><input type="radio" name="q2" value="嫌い">嫌い</label>

    <h2>Q3. 食べることが好きだ</h2>
    <label><input type="radio" name="q3" value="とても好き">とても好き</label>
    <label><input type="radio" name="q3" value="好き">好き</label>
    <label><input type="radio" name="q3" value="少し好き">少し好き</label>
    <label><input type="radio" name="q3" value="そうでもない">そうでもない</label>

    <h2>Q4. 動きながらその場で考えるタイプだ</h2>
    <label><input type="radio" name="q4" value="まさにその通りだ">まさにその通りだ</label>
    <label><input type="radio" name="q4" value="当てはまると思う">当てはまると思う</label>
    <label><input type="radio" name="q4" value="少し当てはまる">少し当てはまる</label>
    <label><input type="radio" name="q4" value="そんなことはない">そんなことはない</label>

    <h2>Q5. 負けず嫌いだ</h2>
    <label><input type="radio" name="q5" value="かなりの負けず嫌いだ">かなりの負けず嫌いだ</label>
    <label><input type="radio" name="q5" value="負けず嫌いだ">負けず嫌いだ</label>
    <label><input type="radio" name="q5" value="少し当てはまる">少し当てはまる</label>
    <label><input type="radio" name="q5" value="全く当てはまらない">全く当てはまらない</label>

    <h2>Q6. 集中力はあるほうだ</h2>
    <label><input type="radio" name="q6" value="かなりあるほうだ">かなりあるほうだ</label>
    <label><input type="radio" name="q6" value="あるほうだ">あるほうだ</label>
    <label><input type="radio" name="q6" value="少しだけある">少しだけある</label>
    <label><input type="radio" name="q6" value="あまりない">あまりない</label>

    <button id="nextButton" onclick="goToNextPage()" disabled>診断結果を見る</button>
  </div>

  <script>
    const nextButton = document.getElementById('nextButton');
    const nicknameInput = document.getElementById('nickname');

    function getSelectedValue(name) {
      const selected = document.querySelector(`input[name="${name}"]:checked`);
      return selected ? selected.value : null;
    }

    function checkAllAnswered() {
      const questions = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6'];
      const allAnswered = questions.every(q => getSelectedValue(q) !== null);
      const hasName = nicknameInput.value.trim().length > 0;
      nextButton.disabled = !(allAnswered && hasName);
    }

    document.querySelectorAll('input[type="radio"]').forEach(radio => {
      radio.addEventListener('change', checkAllAnswered);
    });
    nicknameInput.addEventListener('input', checkAllAnswered);

    function goToNextPage() {
      const q1 = getSelectedValue('q1');
      const q2 = getSelectedValue('q2');
      const q3 = getSelectedValue('q3');
      const q4 = getSelectedValue('q4');
      const q5 = getSelectedValue('q5');
      const q6 = getSelectedValue('q6');

      let candidate = [];
      if (q2 === '好き') candidate.push(1, 2);
      if (q3 === 'とても好き') candidate.push(3, 4);
      if (q4 === 'まさにその通りだ') candidate.push(5, 6);
      if (q5 === 'かなりの負けず嫌いだ') candidate.push(7, 8);
      if (q6 === 'かなりあるほうだ') candidate.push(9, 10);

      const isOutdoor = q1 === 'アウトドア' || q1 === 'どちらかといえばアウトドア';
      const resultPool = candidate.filter(n => isOutdoor ? n % 2 === 1 : n % 2 === 0);

      const finalCandidates = resultPool.length > 0 ? resultPool : (isOutdoor ? [1,3,5,7,9] : [2,4,6,8,10]);
      const result = finalCandidates[Math.floor(Math.random() * finalCandidates.length)];

      localStorage.setItem('nickname', nicknameInput.value.trim());
      localStorage.setItem('result', result);
      window.location.href = 'result.html';
    }
  </script>
</body>
</html>
