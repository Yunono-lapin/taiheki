<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>診断結果</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>診断結果</h1>
    <p id="nicknameDisplay"></p>
    <p id="resultDisplay"></p>
  </div>

  <script>
    const nickname = localStorage.getItem("nickname");
    const answers = JSON.parse(localStorage.getItem("answers") || "{}");

    // ニックネームを表示
    document.getElementById("nicknameDisplay").textContent = `こんにちは、${nickname}さん`;

    // 全結果候補（1〜10）
    const allResults = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

    // Q1によって奇数/偶数制限
    let candidateResults = [];

    switch (answers.q1) {
      case "outdoor":
      case "somewhat_outdoor":
        candidateResults = allResults.filter(n => n % 2 === 1); // 奇数だけ
        break;
      case "somewhat_indoor":
      case "indoor":
        candidateResults = allResults.filter(n => n % 2 === 0); // 偶数だけ
        break;
      default:
        candidateResults = allResults; // 念のため全部
    }

    // Q3が「とても好き」なら 3 と 4 の権利を追加
    if (answers.q3 === "とても好き") {
      if (!candidateResults.includes(3)) candidateResults.push(3);
      if (!candidateResults.includes(4)) candidateResults.push(4);
    }

    // ランダムに選ぶ
    const result = candidateResults[Math.floor(Math.random() * candidateResults.length)];

    // 結果を表示
    document.getElementById("resultDisplay").textContent = `あなたのタイプは「${result}」です！`;
  </script>
</body>
</html>
